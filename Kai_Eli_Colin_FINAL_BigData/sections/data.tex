\subsection{The Raw Data}
\label{sub:raw_data}

We have chosen to combine multiple datasets into a single large dataset in the hope that it will lead to more reliable and robust results for accurately classifying activities of daily life. Originally, we decided to use three datasets that are relatively well known within the HAR community. These datasets have been used previously throughout HAR technical literature and are described in detail below.
\begin{enumerate}
    \item \textsc{Motion Sense}: Twenty-four volunteers---of various ages, genders, heights, and weights---recorded six activities of daily life (walking, walking up- and downstairs, jogging, sitting, standing) using an iPhone 6S. The iPhone 6S recorded tri-axial acceleration, orientation, and gyroscopic data. It was kept in the user's front pocket and collected data at a rate of \SI{50}{\Hz} \cite{malekzadeh2018protecting}. Data was taken on Queen Mary University of London's campus (\SI{51.524}{\degree N}, \SI{0.040}{\degree W}).

    \item \textsc{MobiAct}: Sixty-six volunteers---of various ages, genders, height, and weight---performed four different types of falls and twelve different types of activities of daily life (six of which were walking, walking up- and downstairs, jogging, sitting, standing) resulting in more than 3200 trials. The data was captured using a Samsung Galaxy S3 and includes tri-axial accelerometer, orientation, and gyroscopic data (among others). Data was collected at a rate of \SI{87}{\Hz}. The phone was also in the user's front pocket during data collection \cite{vavoulas2016mobiact}. Data was taken at Technological    Educational  Institute  of  Crete's campus (\SI{35.319}{\degree N}, \SI{25.102}{\degree W}). The acceleration due to gravity was removed from the acceleration of the phone, but it is stored within the data separately.
    
    \item \textsc{University of California at Irvine's Human Activity Recognition (UCI--HAR)}: Data was collected by thirty volunteers---of various ages, genders, heights, and weights---with a Samsung Galaxy S2 performing six activities of daily life (walking, walking up- and downstairs, laying down, sitting, standing). They captured the tri-axial acceleration and tri-axial angular velocity from the phone's accelerometer and gyroscope. The data was taken at a sample rate of \SI{50}{\Hz}. A notable difference, however, is that the phone was attached on the user's waist with a strap \cite{anguita2013public}. Data was taken by SmartLab at Universit√† degli Studi di Genova (\SI{44.415}{\degree N}, \SI{ 8.927}{\degree W}).
    
    \item \textsc{Custom Data Collection}: We are attempting to flesh out an orientation independent representation of accelerometer data. However, the \textsc{Motion Sense} and \textsc{MobiAct} datasets both have the phones in the user's front pocket. We plan on taking data doing the same six activities, while varying the phone orientation, from screen up to screen down. 
    
\end{enumerate}

After investigating the circumstances in which the UCI--HAR data was taken, we decided to not include it in our data combination. Specifically, the UCI--HAR data used a high-pass filter to remove the gravity components of the accelerometer data, which is impossible to reverse. In order to make our HAR algorithm as effective and robust as possible, we want to do all of our data processing on the raw accelerometer data---gravity included. This effectively allows us to take any accelerometer (and orientation) data from a smartphone and classify the user's activity.

\subsection{Initial Data Processing}
\label{sub:data_proc}

The raw data is initially broken up into  segments with a 50\% overlap with adjacent segments. While it would be ideal to have completely uncorrelated examples, we believed a 50\% overlay was a good trade off between more samples and higher quality.  We chose to test 128 and 256 length segments---corresponding to \SI{2.56}{\s} and \SI{5.12}{\s} each. Each one of these segments becomes a single feature vector. For a given trial measuring  activity of daily life, we take the first \SI{2.56}{\s} as our first feature vector; our next feature vector begins in the middle of the first feature vector (e.g.\  our second feature vector begins at \SI{1.28}{\s}) and ends \SI{2.56}{\s} later (e.g.\ our second feature vector ends at \SI{3.84}{\s}). In other words we have a 50\% overlap for each segment and the next. If there is not enough data for the last feature vector, then we do not make one. The datasets were originally kept separate for initial testing.

While the \textsc{UCI-HAR} and \textsc{Motion Sense} datasets were both sampled at \SI{50}{\Hz}, the \textsc{MobiAct} data needs to be downsampled from \SI{87}{\Hz} to \SI{50}{\Hz}. Why would anyone sample at \SI{87}{\Hz}? It is unclear---perhaps that was the maximum sample-rate for the gyroscope in Samsung's Galaxy S3. Regardless, we need a consistent sample rate between datasets. Furthermore, all three of the datasets report different measurements for acceleration. 

Lastly, we need to make sure that the tri-axial accelerometer data is measuring the same thing across datasets. It appears that some of the data has taken gravity into account whereas others have not. \textsc{Motion Sense} reports the acceleration from gravity and from the user in a single vector, whereas  \textsc{MobiAct} has them separately. Unfortunately, \textsc{UCI--HAR} removed gravity by using a high-pass filter with a \SI{0.3}{\Hz} threshold, removing any components below that---as such, it was not possible to use this dataset in our cross dataset comparison. However, we were able to use it to initially validate the results of our classifiers. We also adjusted the acceleration to have the same units across all datasets. Lastly, it was important to evaluate our cross-data comparison based on activities that were in both dataset. As a result, we only evaluated ourselves on  the activities that were in both the \textsc{MobiAct} and \textsc{Motion Sense} datasets, specifically walking, jogging, sitting, standing, walking upstairs, and walking downstairs.

After briefly looking into the magnitude the Coriololis effect would have our our acceleration data---dependent on the latitude where the data was taken by the phone---we concluded it was negligible for the \SIrange{2.56}{5.02}{\s} timescales we were interested in \cite{apel1987principles}.

We also encountered one other issue with the \textsc{MobiAct} dataset. When examining the data, it was clear that for about the first 5 \s of each experiment, the data was anomalous, maybe because they were setting the phone into place. In order to prevent these outliers from affecting our training, we ignored the first 10 \s of each experiment.

